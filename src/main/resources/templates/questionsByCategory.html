<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}">
    <title>Car Health Check</title>
</head>
<body>
<div th:replace="~{layout :: navbar}"></div>
<div class="container py-4">
    <main>
        <form method="POST" th:action="@{/design/questions/save}">
            <input type="hidden" name="carId" th:value="${carId}"/>
            <input type="hidden" name="category" th:value="${category}"/>

            <div class="row g-3 mt-3">
                <div th:each="q : ${questions}" class="col-md-6 mb-3 text-center">

                    <div th:switch="${q.questionType}">
                        <div th:case="'select'">
                            <label th:for="|select-${q.id}|" th:text="#{${q.questionKey}}"></label>
                            <select th:id="|select-${q.id}|" class="form-select"
                                    th:name="|selectedOption_${q.id}|">
                                <option th:each="opt : ${q.options}"
                                        th:value="${opt.id}"
                                        th:text="#{${opt.labelKey}}"></option>
                            </select>
                        </div>

                        <div th:case="'text'">
                            <label th:for="|text-${q.id}|" th:text="#{${q.questionKey}}"></label>
                            <input th:id="|text-${q.id}|" type="text"
                                   th:name="|answerValue_${q.id}|"
                                   th:placeholder="#{questions.placeholder.text}"
                                   class="form-control"/>
                        </div>

                        <div th:case="'number'">
                            <label th:for="|number-${q.id}|" th:text="#{${q.questionKey}}"></label>
                            <input th:id="|number-${q.id}|" type="number"
                                   th:name="|numericValue_${q.id}|"
                                   th:placeholder="#{questions.placeholder.number}"
                                   class="form-control"/>
                        </div>
                    </div>

                    <input type="hidden" th:name="|questionId_${q.id}|" th:value="${q.id}"/>
                </div>
            </div>

            <div class="mt-5 mb-4 text-center">
                <button type="submit" class="btn btn-primary btn-lg px-4 py-2 rounded-pill shadow-sm"
                        th:text="#{design.button}"></button>
                <button type="button" class="btn btn-danger btn-lg"
                        th:text="#{summary.delete.button}"
                        th:onclick="'confirmDelete(' + ${car.id} + ')'"></button>
            </div>
        </form>
    </main>
</div>
<div th:replace="~{layout :: footer}"></div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/confirmDelete.js"></script>
</body>
</html>
